subject: Receipt Submission
path: /objects.html#glossary_receipt_submission
meaning: |
  A receipt submission contains the Bare Receipt, Notary signature, 
  a time-of-use timestamp to be compared against the freshness requirement of the Receipt Definition,
  and a chained useage-token called the "nextstamp", which will be empty if the receipt is being submitted for the first time.
  It also includes the Client's signature of the receipt, nextstamp, and time-of-use, and it includes the public key needed to check that signature.
  This public key is used by the Host as an identifier for the Client;
  the Client may reuse a key pair (or not) to the extent and in whatever circumstances they wish to be identifiable as the same user over time.

  In some cases the client will want to use a collection of multiple receipts (typically receipts they have used previously)
  to claim access to a resource.
  For example, a website might give Receipt Definitions to the effect of _"Pages are \$0.05 each, up to \$3.00/month."_.
  Once a customer had viewed enough pages that their receipts for that month totaled \$3.00,
  their Client would begin submitting those existing receipts as a bundle instead of buying a receipt for each page.

  The use-signature is a conventional RSA signature, using SHA-512 hashing, of the concatination of
  all the receipt UUIDs,
  then all the nextstamps,
  and finally the submission timestamp, all as utf-8.
  The UUIDs should be in cannoical (hyphenated, lower-case) format, without curly braces.
  `TODO: Define how the elements should be ordered.`

  new vs old receipts....


example: |
  ```xml
  <submissions xmlns="https://402.TBD">
    <submission>
      <receiptstring>
        %3Cbarereceipt%20xmlns%3D%22https%3A%2F%2F402.TBD%22%3E%0A%20%20%3Ctime%3E1557944008%3C%2Ftime%3E%0A%20%20%3Cuuid%3Ebf9c1367-9589-41ff-8f74-134877341cce%3C%2Fuuid%3E%0A%20%20%3Cdomain%3Ehttps%3A%2F%2Fwww.example.com%2F%3C%2Fdomain%3E%0A%20%20%3Citem%3E%2Fpath%2Fimage.png%3C%2Fitem%3E%0A%20%20%3Csigner%3Ehttps%3A%2F%2Freceipts.dmn.network%2Fpath%3C%2Fsigner%3E%0A%20%20%3Ccost%3E%0A%20%20%20%20%3Cunits%3EUSD%3C%2Funits%3E%0A%20%20%20%20%3Camount%3E0.05%3C%2Famount%3E%0A%20%20%3C%2Fcost%3E%0A%3C%2Fbarereceipt%3E
      </receiptstring>
      <receiptsignature>
        3c626172657265636569707420786d6c6e733d2268747470733a2f2f3430322e544244223e0d0a20203ch
      </receiptsignature>
      <usestamp>kjsadflkjasdfljsadfsaldfkjlkajskdf</usestamp>
    </submission>
  </submissions>
  <submitted>1557944099</submitted>
  <usesignature>
    1235516849846513213215468465132135165498498496515321635819849h
  </usesignature>
  <user>
    ---PEM KEY---
    asdf;lkjasdfl;kjasdlkjfa
    ---END KEY---
  </user>
  ```



